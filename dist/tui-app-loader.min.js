/*!
 * tui-app-loader.min.js
 * @version 2.1.0
 * @author NHNEnt FE Development Lab <dl_javascript@nhnent.com>
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("tui-code-snippet"),require("ua-parser-js")):"function"==typeof define&&define.amd?define(["tui-code-snippet","ua-parser-js"],t):"object"==typeof exports?exports.AppLoader=t(require("tui-code-snippet"),require("ua-parser-js")):(e.tui=e.tui||{},e.tui.AppLoader=t(e.tui&&e.tui.util,e.UAParser))}(this,function(e,t){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="dist/",t(0)}([function(e,t,i){"use strict";function n(){var e=location.hostname;h||(h=!0,r.imagePing("https://www.google-analytics.com/collect",{v:1,t:"event",tid:"UA-115377265-9",cid:e,dp:e,dh:"app-loader"}))}var r=i(1),o=i(5),s=i(2),a=i(4),c=i(3),d={ios:{scheme:"",url:""},android:{scheme:"",url:""}},u=r.defineClass({init:function(e){var t=(new o).getResult(),i=t.os;this.agent=t,this.ua=t.ua,this.osName=i.name,this.osVersion=i.version,this.detector=null,e=r.extend({usageStatistics:!0},e),e.usageStatistics&&n()},_setDetector:function(e){var t=this.osName,i="Android"===t,n="iOS"===t;i?this._setAndroidDetector(e):n&&e.iosStoreURL?this._setIOSDetector():this._setEtcDetector(e)},_setIOSDetector:function(){var e=parseInt(this.osVersion,10);e>8?this.detector=a.iOS9AndLater:8===e?this.detector=a.iOS8:this.detector=a.iOS7AndBefore},_setAndroidDetector:function(e){e.intentURI&&this.doesBrowserSupportIntent()?this.detector=s.androidIntentDetector:this.detector=s.androidSchemeDetector},_setEtcDetector:function(e){this.detector=c,setTimeout(function(){e.etcCallback&&e.etcCallback()},100)},_runDetector:function(e){this.detector&&this.detector!==c&&this.detector.run(e)},doesBrowserSupportIntent:function(){return!/firefox|opr/i.test(this.agent.ua)},exec:function(e){var t,i;e=r.extend(d,e),t=e.timerSet,i={urlScheme:e.ios.scheme,iosStoreURL:e.ios.url,universalLink:e.ios.universalLink,intentURI:e.android.intentURI,useIframe:e.android.useIframe,onErrorIframe:e.android.onErrorIframe,etcCallback:e.etcCallback,notFoundCallback:e.notFoundCallback},this._setDetector(i),t&&this._setTimerTime(t),this._runDetector(i)},_setTimerTime:function(e){this.detector.TIMEOUT||(this.detector.TIMEOUT={}),this.detector.TIMEOUT.IOS=e.ios||this.detector.TIMEOUT.IOS,this.detector.TIMEOUT.ANDROID=e.android||this.detector.TIMEOUT.ANDROID}}),h=!1;e.exports=u},function(t,i){t.exports=e},function(e,t,i){"use strict";var n=i(1),r="tui-support-frame",o={TIMEOUT:{IOS:2e3,ANDROID:800,INTERVAL:100},moveTo:function(e){top.location.href=e},runAppWithIframe:function(e){var t=this.createIFrameElement();return t.src=e,document.body.appendChild(t),t},createIFrameElement:function(){var e=document.createElement("iframe");return e.id=r,e.frameborder="0",e.width="0",e.height="0",e.style.display="none",e},deferCallback:function(e,t){var i=(new Date).getTime(),r=this;if(n.isFunction(e))return setTimeout(function(){var n=(new Date).getTime();r.isPageVisible()&&n-i<t+r.TIMEOUT.INTERVAL&&e()},t)},isPageVisible:function(){return n.isExisty(document.hidden)?!document.hidden:!n.isExisty(document.webkitHidden)||!document.webkitHidden}};o.androidSchemeDetector=n.extend({type:"scheme",run:function(e){var t=e.notFoundCallback;t&&this.deferCallback(t,this.TIMEOUT.ANDROID),this.runAppWithIframe(e.urlScheme)}},o),o.androidIntentDetector=n.extend({type:"intent",launchViaIframe:function(e,t,i){var r=this.runAppWithIframe(e),o=this.deferCallback(t,this.TIMEOUT.ANDROID);setTimeout(function(){try{r&&r.contentDocument.body&&document.body.removeChild(r)}catch(e){document.body.removeChild(r),clearTimeout(o),n.isFunction(i)&&i()}},100)},run:function(e){var t=e.notFoundCallback,i=e.intentURI;e.useIframe?this.launchViaIframe(i,t,e.onErrorIframe):(this.moveTo(i),this.deferCallback(t,this.TIMEOUT.ANDROID))}},o),e.exports=o},function(e,t){"use strict";var i={type:"etc",run:function(){}};e.exports=i},function(e,t,i){"use strict";var n=i(1),r=i(2),o=n.extend({bindVisibilityChangeEvent:function(){var e=this;document.addEventListener("visibilitychange",function t(){e.isPageVisible()&&(clearTimeout(e.tid),document.removeEventListener("visibilitychange",t))})},bindPagehideEvent:function(){var e=this;window.addEventListener("pagehide",function t(){e.isPageVisible()&&(clearTimeout(e.tid),window.removeEventListener("pagehide",t))})}},r);o.iOS7AndBefore=n.extend({run:function(e){var t=e.iosStoreURL,i=e.notFoundCallback||n.bind(this.moveTo,this,t);this.tid=this.deferCallback(i,this.TIMEOUT.IOS),this.bindPagehideEvent(),this.runAppWithIframe(e.urlScheme)}},o),o.iOS8=n.extend({run:function(e){var t=e.iosStoreURL,i=e.notFoundCallback,r=i||n.bind(this.moveTo,this,t);this.tid=this.deferCallback(r,this.TIMEOUT.IOS),this.bindVisibilityChangeEvent(),this.runAppWithIframe(e.urlScheme)}},o),o.iOS9AndLater=n.extend({run:function(e){var t=e.iosStoreURL,i=e.notFoundCallback,r=i||n.bind(this.moveTo,this,t);e.universalLink?this.moveTo(e.universalLink):(this.tid=this.deferCallback(r,this.TIMEOUT.IOS),this.bindVisibilityChangeEvent(),this.moveTo(e.urlScheme))}},o),e.exports=o},function(e,i){e.exports=t}])});